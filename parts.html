<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parts Database - Beyblade X</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="parts-body">

    <nav class="top-nav">
        <a href="index.html" class="nav-logo">BEYBLADE X PH</a>
        <div class="nav-links">
            <a href="news.html" class="nav-item" style="text-decoration: line-through;">NEWS</a>
            <a href="tournaments.html" class="nav-item" style="text-decoration: line-through;">TOURNAMENTS</a>
            <a href="meta.html" class="nav-item" style="text-decoration: line-through;">META DATA</a>
            <a href="parts.html" class="nav-item">DATABASE</a>
            <a href="builder.html" class="nav-item" style="text-decoration: line-through;">BUILDER</a>
        </div>
    </nav>

    <div class="container">
        <h1 class="glow-text-blue">BEYBLADE X DATABASE</h1>
            <div class="accessory-section-separator"><span>PARTS</span></div>
            <div class="parts-grid">
                <a href="blades.html" class="part-card blade-card">
                    <div class="card-icon">‚ö°</div>
                    <h2>BLADES</h2>
                </a>
                <a href="ratchets.html" class="part-card ratchet-card">
                    <div class="card-icon">‚öôÔ∏è</div>
                    <h2>RATCHETS</h2>
                </a>
                <a href="bits.html" class="part-card bit-card">
                    <div class="card-icon">üíé</div>
                    <h2>BITS</h2>
                </a>
            </div>

            <div class="cx-section">
                <div class="cx-section-separator"><span>CX LINE PARTS</span></div>
                <div class="cx-grid">
                    <a href="assist-blades.html" class="part-card assist-card">
                        <div class="card-icon">üõ°Ô∏è</div>
                        <h2>ASSIST BLADES</h2>
                    </a>
                    <a href="lock-chips.html" class="part-card lock-card">
                        <div class="card-icon">üîí</div>
                        <h2>LOCK CHIPS</h2>
                    </a>
                </div>
            </div>

            <div class="accessory-section">
                <div class="accessory-section-separator"><span>GEARS & STADIUMS</span></div>
                <div class="parts-grid">
                    <a href="stadiums.html" class="part-card stadium-card">
                        <div class="card-icon">üèüÔ∏è</div>
                        <h2>STADIUMS</h2>
                    </a>
                    <a href="launchers.html" class="part-card launcher-card">
                        <div class="card-icon">üöÄ</div>
                        <h2>LAUNCHERS</h2>
                    </a>
                    <a href="accessories.html" class="part-card launcher-card">
                        <div class="card-icon">üöÄ</div>
                        <h2>ACCESSORIES</h2>
                    </a>
                </div>
            </div>
            
        <div class="full-bey-section">
            <h1 class="glow-text-blue" style="font-size: 1.5rem; margin-top: 100px; text-align: center;">RELEASES</h1>

            <div class="search-container">
                <input type="text" id="bladeSearch" placeholder="Search Beyblade Name..." onkeyup="filterBeys()">
                <div id="searchResults" class="bey-list" style="margin-top: 20px; border-bottom: 1px solid #333; padding-bottom: 20px;"></div>
            </div>

            <div class="bx-line-separator"><span>BX RELEASES</span></div>
            <div class="bx-line-separator"><span>BX LIMITED RELEASES</span></div>
            <div class="ux-line-separator"><span>UX RELEASES</span></div>
            <div class="ux-line-separator"><span>UX LIMITED RELEASES</span></div>
            <div class="cx-line-separator"><span>CX RELEASES</span></div>
            <div class="cx-line-separator"><span>CX LIMITED RELEASES</span></div>
        </div>
        </div>

    <script>
        let beyData = [];

        // Fetch the JSON file
        fetch('beyxdb-0.1.json')
            .then(response => {
                if (!response.ok) throw new Error("JSON not found");
                return response.json();
            })
            .then(data => {
                // Filter out empty rows from Excel export
                beyData = data.filter(bey => bey["bey-name"] && bey["bey-name"] !== "");
                renderBeys(beyData); // Show all beys on start
            })
            .catch(err => console.error("Error loading database:", err));

        function renderBeys(list) {
            const resultsContainer = document.getElementById('searchResults');
            resultsContainer.innerHTML = ""; 

            list.forEach(bey => {
                // Handle CX-specific extra parts
                let cxInfo = "";
                if (bey["bey-line"] === "CX") {
                    cxInfo = `
                        <div class="cx-parts-detail">
                            <span>L: ${bey["bey-lock"]}</span>
                            <span>A: ${bey["bey-assist"]}</span>
                        </div>`;
                }

                const cardHTML = `
                    <div class="${bey["bey-line"].toLowerCase()}-bey-card">
                        <div class="bey-img-box">
                            <img src="${bey["large-bey-image"]}" class="large-bey-img" onerror="this.src='images/placeholder.png'">
                        </div>
                        <div class="bey-info">
                            <span class="bey-id">${bey["bey-line"]}-${bey["bey-id"]}</span>
                            <h3 class="bey-blade ${bey["bey-name"].length > 12 ? 'long-name' : ''}">${bey["bey-name"]}</h3>
                            <p class="bey-parts">${bey["bey-ratchet"]} ${bey["bey-bit"]}</p>
                            ${cxInfo}
                            <span class="bey-line ${bey["bey-line"].toLowerCase()}-tag">${bey["bey-line"]} LINE</span>
                        </div>
                    </div>
                `;
                resultsContainer.innerHTML += cardHTML;
            });
        }

        function filterBeys() {
            let input = document.getElementById('bladeSearch').value.toLowerCase();
            const filtered = beyData.filter(bey => 
                bey["bey-name"].toLowerCase().includes(input) || 
                bey["bey-id"].toLowerCase().includes(input)
            );
            renderBeys(filtered);
        }
    </script>
    </div>
</body>
</html>
